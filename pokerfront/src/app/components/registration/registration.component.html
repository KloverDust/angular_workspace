<div class="page-container mat-app-background">
  <div class="content-top">
    <mat-toolbar color="primary" class="header">
      <button mat-icon-button (click)="backToLogin()" aria-label="Back to Login">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <h2>Registrazione</h2>
    </mat-toolbar>

    <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="registration-form-content">
      <!-- Nome -->
      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Nome</mat-label>
        <input matInput formControlName="nome" placeholder="Inserisci il nome">
        <mat-error *ngIf="registrationForm.get('nome')?.errors?.['required']">
          Il nome è obbligatorio
        </mat-error>
      </mat-form-field>

      <!-- Cognome -->
      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Cognome</mat-label>
        <input matInput formControlName="cognome" placeholder="Inserisci il cognome">
        <mat-error *ngIf="registrationForm.get('cognome')?.errors?.['required']">
          Il cognome è obbligatorio
        </mat-error>
      </mat-form-field>

      <!-- Username -->
      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Username</mat-label>
        <input matInput formControlName="username" placeholder="Inserisci username">
        <mat-error *ngIf="registrationForm.get('username')?.errors?.['required']">
          L'username è obbligatorio
        </mat-error>
        <mat-error *ngIf="registrationForm.get('username')?.errors?.['minlength']">
          Username deve essere almeno 4 caratteri
        </mat-error>
      </mat-form-field>

      <!-- Password -->
      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Password</mat-label>
        <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password" placeholder="Inserisci password">
        <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" type="button">
          <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
        <mat-error *ngIf="registrationForm.get('password')?.errors?.['required']">
          La password è obbligatoria
        </mat-error>
        <mat-error *ngIf="registrationForm.get('password')?.errors?.['minlength']">
          Password deve essere almeno 6 caratteri
        </mat-error>
      </mat-form-field>

      <!-- Credito Iniziale -->
      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Credito Iniziale</mat-label>
        <input matInput type="number" formControlName="credito" placeholder="Inserisci il credito iniziale">
        <mat-error *ngIf="registrationForm.get('credito')?.errors?.['required']">
          Il credito è obbligatorio
        </mat-error>
        <mat-error *ngIf="registrationForm.get('credito')?.errors?.['min']">
          Il credito deve essere un numero positivo o zero
        </mat-error>
      </mat-form-field>

      <!-- Ruolo -->
      <div class="role-section">
        <label class="mat-body-1">Ruolo</label>
        <mat-radio-group formControlName="ruolo" class="role-options">
          <mat-radio-button *ngFor="let role of roles" [value]="role" color="primary">
            {{role.descrizione}}
          </mat-radio-button>
        </mat-radio-group>
        <mat-error *ngIf="registrationForm.get('ruolo')?.invalid && (registrationForm.get('ruolo')?.dirty || registrationForm.get('ruolo')?.touched)">
          La selezione del ruolo è obbligatoria
        </mat-error>
      </div>

      <div class="actions-container">
        <button mat-raised-button color="primary" type="submit" [disabled]="!registrationForm.valid">
          Registrati
        </button>
        <button mat-button type="button" (click)="backToLogin()">
          Torna al Login
        </button>
      </div>
    </form>
  </div>

  <div class="content-bottom">
    <div class="bottom-spacer"></div>
  </div>
</div>

